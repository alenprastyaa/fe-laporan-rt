import{r as n,y as j,o as I,b as A,w as U,a as i,e,p as c,z as y,f as p,j as H,F as L,i as B,t as l,h as N,C as E,E as R,g as q,B as F,q as G}from"./index-CqU-N3Nx.js";import{a as m}from"./axios-2s9xPmg-.js";import{S as d}from"./sweetalert2.esm.all-B3GDCxSY.js";import{_ as K}from"./AdminLayout-wSIyYV-Y.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"space-y-6"},Q={class:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4"},Y={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden"},J={class:"p-5 border-b border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50 flex flex-col sm:flex-row justify-between gap-4"},X={class:"relative w-full sm:w-72 group"},Z={class:"overflow-x-auto"},ee={class:"min-w-full align-middle"},te={class:"divide-y divide-gray-100 dark:divide-gray-700 bg-white dark:bg-gray-800"},re={key:0},ae={key:1},oe={class:"px-6 py-4 whitespace-nowrap"},se={class:"flex items-center gap-4"},le={class:"relative"},ne={class:"w-10 h-10 rounded-full overflow-hidden ring-2 ring-gray-100 dark:ring-gray-700 group-hover:ring-blue-200 transition-all"},ie=["src"],de={class:"text-sm font-semibold text-gray-900 dark:text-white"},ue={class:"text-xs text-gray-500 dark:text-gray-400 hidden sm:block"},ge={class:"px-6 py-4 whitespace-nowrap"},ce={class:"text-sm text-gray-600 dark:text-gray-300 flex items-center gap-2"},pe={class:"px-6 py-4 whitespace-nowrap"},be={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},xe={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ye={class:"flex items-center justify-end gap-2 opacity-80 group-hover:opacity-100 transition-opacity"},me=["onClick"],he=["onClick"],ke={class:"border-t border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50 px-6 py-4 flex flex-col sm:flex-row items-center justify-between gap-4"},fe={class:"text-sm text-gray-500 dark:text-gray-400"},ve={class:"font-semibold text-gray-700 dark:text-white"},we={class:"flex items-center gap-2"},_e=["disabled"],Be=["disabled"],Ce={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Pe={class:"relative bg-white dark:bg-gray-800 rounded-2xl w-full max-w-md shadow-2xl border border-gray-100 dark:border-gray-700 overflow-hidden transform transition-all scale-100"},Me={class:"px-6 py-5 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-gray-50/50 dark:bg-gray-800/50"},je={class:"text-lg font-bold text-gray-800 dark:text-white"},Ue={class:"space-y-4"},Se={class:"relative"},Te={class:"block text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1.5 uppercase tracking-wide"},ze=["required"],Ve={class:"pt-2 flex gap-3"},De={type:"submit",class:"flex-1 px-4 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:shadow-lg hover:shadow-blue-500/30 font-medium transition-all duration-300 text-sm transform active:scale-95"},$e={__name:"BasicTables",setup(Ie){const h=n([]),k=n(!1),f=n(""),S=n("");let v=null;const o=j({currentPage:1,limit:8,totalData:0,totalPage:1}),w=n(!1),u=n(!1),_=n(!1),C=n(null),a=j({username:"",phone:"",role:"user",password:"",rt:""}),g=async()=>{k.value=!0;const s=localStorage.getItem("rt");try{const t=localStorage.getItem("token"),r=await m.get("https://alentest.my.id/laporan/api/auth/users",{headers:{Authorization:`Bearer ${t}`},params:{page:o.currentPage,limit:o.limit,search:f.value,role:S.value,rt:s}});r.data.status==="success"&&(h.value=r.data.data,o.currentPage=r.data.pagination.currentPage,o.totalPage=r.data.pagination.totalPage)}catch(t){console.error(t)}finally{k.value=!1}},T=async()=>{var r,x;_.value=!0;const t={Authorization:`Bearer ${localStorage.getItem("token")}`};a.rt||(a.rt=localStorage.getItem("rt"));try{u.value?(await m.put(`https://alentest.my.id/laporan/api/auth/users/${C.value}`,a,{headers:t}),d.fire("Berhasil","Data user diperbarui","success")):(await m.post("https://alentest.my.id/laporan/api/auth/users",a,{headers:t}),d.fire("Berhasil","User baru ditambahkan","success")),b(),g()}catch($){d.fire("Gagal",((x=(r=$.response)==null?void 0:r.data)==null?void 0:x.message)||"Terjadi kesalahan","error")}finally{_.value=!1}},z=async s=>{if((await d.fire({title:"Hapus User?",text:"Data yang dihapus tidak dapat dikembalikan.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#EF4444",cancelButtonColor:"#6B7280",confirmButtonText:"Ya, Hapus",cancelButtonText:"Batal",reverseButtons:!0,customClass:{popup:"rounded-xl",confirmButton:"rounded-lg",cancelButton:"rounded-lg"}})).isConfirmed)try{const r=localStorage.getItem("token");await m.delete(`https://alentest.my.id/laporan/api/auth/users/${s}`,{headers:{Authorization:`Bearer ${r}`}}),d.fire("Terhapus!","User telah dihapus.","success"),g()}catch{d.fire("Gagal","Gagal menghapus data","error")}},V=()=>{v&&clearTimeout(v),v=setTimeout(()=>{o.currentPage=1,g()},500)},P=s=>{o.currentPage=s,g()},D=s=>s?new Date(s).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}):"-",M=(s,t=null)=>{u.value=s==="edit",w.value=!0;const r=localStorage.getItem("rt")||"";s==="edit"&&t?(C.value=t.id,a.username=t.username,a.phone=t.phone,a.role=t.role,a.rt=t.rt||r,a.password=""):(a.username="",a.phone="",a.role="user",a.password="",a.rt=r)},b=()=>{w.value=!1};return I(g),(s,t)=>(i(),A(K,null,{default:U(()=>[e("div",O,[e("div",Q,[t[9]||(t[9]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-800 dark:text-white tracking-tight"},"Manajemen Pengguna"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Kelola data warga dan hak akses sistem.")],-1)),e("button",{onClick:t[0]||(t[0]=r=>M("add")),class:"group relative px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-full shadow-lg shadow-blue-500/30 hover:shadow-blue-500/50 hover:scale-[1.02] transition-all duration-300 font-medium text-sm flex items-center gap-2 overflow-hidden"},t[8]||(t[8]=[e("span",{class:"absolute inset-0 w-full h-full bg-white/20 group-hover:translate-x-full transition-transform duration-500 ease-out -skew-x-12 origin-left"},null,-1),e("svg",{class:"w-5 h-5 relative z-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("span",{class:"relative z-10"},"Tambah User Baru",-1)]))]),e("div",Y,[e("div",J,[e("div",X,[t[10]||(t[10]=e("span",{class:"absolute inset-y-0 left-0 flex items-center pl-3 transition-colors group-focus-within:text-blue-500 text-gray-400"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),c(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>f.value=r),onInput:V,type:"text",placeholder:"Cari Username atau No. HP...",class:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-600 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all dark:text-white placeholder-gray-400"},null,544),[[y,f.value]])])]),e("div",Z,[e("table",ee,[t[17]||(t[17]=e("thead",null,[e("tr",{class:"bg-gray-50/80 dark:bg-gray-700/30 border-b border-gray-100 dark:border-gray-700"},[e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," User Profile"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Kontak"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Role"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Bergabung"),e("th",{class:"px-6 py-4 text-right text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Aksi")])],-1)),e("tbody",te,[k.value?(i(),p("tr",re,t[11]||(t[11]=[e("td",{colspan:"5",class:"px-6 py-12 text-center"},[e("div",{class:"flex flex-col items-center justify-center"},[e("svg",{class:"animate-spin h-8 w-8 text-blue-500 mb-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),e("span",{class:"text-gray-500 text-sm"},"Sedang memuat data...")])],-1)]))):h.value.length===0?(i(),p("tr",ae,t[12]||(t[12]=[e("td",{colspan:"5",class:"px-6 py-12 text-center text-gray-500"},[e("p",{class:"text-base font-medium"},"Data tidak ditemukan"),e("p",{class:"text-xs mt-1"},"Coba kata kunci pencarian lain.")],-1)]))):(i(!0),p(L,{key:2},H(h.value,r=>(i(),p("tr",{key:r.id,class:"group hover:bg-blue-50/50 dark:hover:bg-blue-900/10 transition-colors duration-200"},[e("td",oe,[e("div",se,[e("div",le,[e("div",ne,[e("img",{src:`https://ui-avatars.com/api/?name=${r.username}&background=random&color=fff&bold=true`,class:"w-full h-full object-cover",alt:"Avatar"},null,8,ie)]),t[13]||(t[13]=e("span",{class:"absolute bottom-0 right-0 w-2.5 h-2.5 bg-green-500 border-2 border-white dark:border-gray-800 rounded-full"},null,-1))]),e("div",null,[e("div",de,l(r.username),1),e("div",ue,"ID: #"+l(r.id),1)])])]),e("td",ge,[e("div",ce,[t[14]||(t[14]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)),B(" "+l(r.phone||"Belum diisi"),1)])]),e("td",pe,[e("span",{class:G(["px-3 py-1 rounded-full text-xs font-semibold border",r.role==="admin"?"bg-purple-50 text-purple-700 border-purple-100 dark:bg-purple-900/30 dark:text-purple-300 dark:border-purple-800":"bg-blue-50 text-blue-700 border-blue-100 dark:bg-blue-900/30 dark:text-blue-300 dark:border-blue-800"])},l(r.role==="admin"?"Administrator":"Warga"),3)]),e("td",be,l(D(r.created_at)),1),e("td",xe,[e("div",ye,[e("button",{onClick:x=>M("edit",r),class:"p-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-300 rounded-lg hover:border-blue-500 hover:text-blue-600 hover:shadow-md transition-all duration-200",title:"Edit Data"},t[15]||(t[15]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)]),8,me),e("button",{onClick:x=>z(r.id),class:"p-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-300 rounded-lg hover:border-red-500 hover:text-red-600 hover:shadow-md transition-all duration-200",title:"Hapus User"},t[16]||(t[16]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,he)])])]))),128))])])]),e("div",ke,[e("span",fe,[t[18]||(t[18]=B(" Menampilkan halaman ")),e("span",ve,l(o.currentPage),1),B(" dari "+l(o.totalPage),1)]),e("div",we,[e("button",{onClick:t[2]||(t[2]=r=>P(o.currentPage-1)),disabled:o.currentPage<=1,class:"px-4 py-2 text-sm font-medium bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-gray-700 dark:text-white shadow-sm"}," Previous ",8,_e),e("button",{onClick:t[3]||(t[3]=r=>P(o.currentPage+1)),disabled:o.currentPage>=o.totalPage,class:"px-4 py-2 text-sm font-medium bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-gray-700 dark:text-white shadow-sm"}," Next ",8,Be)])])]),N(F,{name:"modal-fade"},{default:U(()=>[w.value?(i(),p("div",Ce,[e("div",{class:"absolute inset-0 bg-gray-900/60 backdrop-blur-sm transition-opacity",onClick:b}),e("div",Pe,[e("div",Me,[e("div",null,[e("h3",je,l(u.value?"Edit Profil User":"TambahUser Baru"),1),t[19]||(t[19]=e("p",{class:"text-xs text-gray-500 mt-0.5"},"Pastikan data yang diinput sudah benar.",-1))]),e("button",{onClick:b,class:"p-1 rounded-full text-gray-400 hover:text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 transition"},t[20]||(t[20]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:E(T,["prevent"]),class:"p-6 space-y-5"},[e("div",Ue,[e("div",null,[t[21]||(t[21]=e("label",{class:"block text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1.5 uppercase tracking-wide"},"Username",-1)),c(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>a.username=r),type:"text",class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all dark:text-white placeholder-gray-400 text-sm",placeholder:"Masukkan nama pengguna",required:""},null,512),[[y,a.username]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1.5 uppercase tracking-wide"},"Nomor HP",-1)),c(e("input",{"onUpdate:modelValue":t[5]||(t[5]=r=>a.phone=r),type:"text",class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all dark:text-white placeholder-gray-400 text-sm",placeholder:"0812..."},null,512),[[y,a.phone]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1.5 uppercase tracking-wide"},"Role Akses",-1)),e("div",Se,[c(e("select",{"onUpdate:modelValue":t[6]||(t[6]=r=>a.role=r),class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all dark:text-white text-sm appearance-none"},t[23]||(t[23]=[e("option",{value:"user"},"Warga",-1)]),512),[[R,a.role]]),t[24]||(t[24]=e("div",{class:"absolute inset-y-0 right-0 flex items-center px-3 pointer-events-none text-gray-500"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),e("div",null,[e("label",Te," Password "+l(u.value?"(Opsional)":""),1),c(e("input",{"onUpdate:modelValue":t[7]||(t[7]=r=>a.password=r),type:"password",class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all dark:text-white placeholder-gray-400 text-sm",placeholder:"••••••••",required:!u.value},null,8,ze),[[y,a.password]])])]),e("div",Ve,[e("button",{type:"button",onClick:b,class:"flex-1 px-4 py-2.5 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 font-medium transition-colors text-sm"}," Batal "),e("button",De,l(_.value?"Menyimpan...":"Simpan Perubahan"),1)])],32)])])):q("",!0)]),_:1})])]),_:1}))}},Re=W($e,[["__scopeId","data-v-4e2f8c74"]]);export{Re as default};

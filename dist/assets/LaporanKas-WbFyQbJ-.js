import{r as m,x as E,o as be,b as ce,w as me,a as r,e as t,t as o,q as G,f as n,p as g,y as W,D as U,F as _,j as B,v as h,u as f,i as T,g as k,J as ne,H as oe}from"./index-kl8wxQCG.js";import{a as y}from"./axios-2s9xPmg-.js";import{S as x}from"./sweetalert2.esm.all-B3GDCxSY.js";import{_ as ke}from"./AdminLayout-BxThBhf6.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const xe={class:"space-y-2"},ye={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ve={class:"bg-white dark:bg-gray-800 p-5 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm flex items-center justify-between"},he={class:"text-xl font-bold text-green-600 mt-1"},fe={class:"bg-white dark:bg-gray-800 p-5 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm flex items-center justify-between"},we={class:"text-xl font-bold text-red-600 mt-1"},_e={class:"bg-white dark:bg-gray-800 p-5 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm flex items-center justify-between"},Pe={class:"text-2xl font-bold text-blue-600 mt-1"},Ce={class:"flex flex-col sm:flex-row justify-between items-center gap-4"},Se={class:"bg-gray-100 dark:bg-gray-800 p-1 rounded-lg flex gap-1"},je={class:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-xl p-5 shadow-sm min-h-[500px]"},Be={key:0,class:"space-y-6"},Me={class:"flex flex-col md:flex-row justify-between items-end md:items-center gap-4"},$e={class:"flex flex-col sm:flex-row gap-3 w-full md:w-auto"},Ie={class:"relative w-full sm:w-48"},De={class:"flex gap-2 w-full md:w-auto"},Te=["value"],Ae=["value"],ze={class:"flex flex-col sm:flex-row gap-3 w-full md:w-auto items-stretch"},Ve={class:"flex bg-gray-100 dark:bg-gray-800 p-1 rounded-lg"},Le={key:0,class:"flex justify-between items-center bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg border border-gray-100 dark:border-gray-700"},Ue={class:"text-lg font-bold text-green-600"},Ke={class:"text-sm text-gray-500 dark:text-gray-400"},He={key:1,class:"mb-4 flex items-center justify-between bg-blue-50 p-3 rounded-lg border border-blue-100 dark:bg-blue-900/20 dark:border-blue-800"},Ne={class:"flex items-center gap-3 pl-2"},Re={class:"overflow-x-auto"},Ee={class:"w-full text-left border-collapse"},Ge={class:"border-b border-gray-100 dark:border-gray-800 text-gray-500 text-xs uppercase bg-gray-50 dark:bg-gray-800/50"},We={key:0,class:"p-4 w-10"},Fe={key:1,class:"p-4"},qe={key:2,class:"p-4"},Je={key:3,class:"p-4"},Oe={class:"p-4 text-center"},Ye={class:"divide-y divide-gray-100 dark:divide-gray-800"},Qe={key:0},Xe=["colspan"],Ze={key:1},et=["colspan"],tt={key:0,class:"p-4"},at=["value"],st={class:"p-4"},rt={class:"font-medium text-gray-800 dark:text-white"},lt={class:"text-xs text-gray-500"},nt={class:"p-4 text-sm text-gray-600 dark:text-gray-400"},ot={class:"p-4 text-sm font-medium dark:text-green-400 text-green-700"},dt={class:"p-4 text-sm font-medium dark:text-white"},it={class:"p-4 text-sm font-medium dark:text-white"},ut={class:"p-4 text-right"},gt={key:0,class:"px-2 py-1 rounded-full text-xs font-bold bg-green-100 text-green-700"},pt={key:1,class:"text-xs text-red-500"},bt={class:"p-4 flex justify-center gap-2"},ct=["onClick"],mt=["onClick"],kt=["onClick"],xt={key:1,class:"space-y-6"},yt={class:"flex flex-col md:flex-row justify-between items-end md:items-center gap-4"},vt={class:"flex flex-col sm:flex-row gap-3 w-full md:w-auto"},ht={class:"relative w-full sm:w-48"},ft={class:"flex gap-2 w-full md:w-auto"},wt=["value"],_t=["value"],Pt={class:"flex gap-2"},Ct={class:"flex justify-between items-center bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg border border-gray-100 dark:border-gray-700"},St={class:"text-lg font-bold text-red-600"},jt={class:"overflow-x-auto"},Bt={class:"w-full text-left border-collapse"},Mt={class:"border-b border-gray-100 dark:border-gray-800 text-gray-500 text-xs uppercase bg-gray-50 dark:bg-gray-800/50"},$t={class:"p-4 text-center"},It={class:"divide-y divide-gray-100 dark:divide-gray-800"},Dt={key:0},Tt={key:1},At={class:"p-4 text-sm text-gray-600 dark:text-gray-400"},zt={class:"p-4 text-sm font-medium text-gray-800 dark:text-white"},Vt={class:"p-4 text-sm font-bold text-red-600"},Lt={class:"p-4 text-sm font-bold dark:text-white"},Ut={class:"p-4 flex justify-center gap-2"},Kt=["onClick"],Ht=["onClick"],Nt={class:"flex justify-between items-center border-t border-gray-200 dark:border-gray-700 pt-4 mt-4"},Rt={class:"text-sm text-gray-500"},Et={class:"flex gap-2"},Gt=["disabled"],Wt=["disabled"],Ft={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm"},qt={class:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-md shadow-2xl p-6"},Jt={class:"text-lg font-bold mb-4 text-gray-800 dark:text-white"},Ot={key:0},Yt=["value"],Qt={key:1,class:"bg-blue-50 text-blue-700 p-3 rounded-lg text-sm border border-blue-100 flex items-center gap-2"},Xt={class:"grid grid-cols-2 gap-4"},Zt={class:"relative mt-1"},ea=["value"],ta={class:"relative mt-1"},aa=["value"],sa={class:"text-sm text-gray-500"},ra={class:"flex gap-3 pt-2"},la={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm"},na={class:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-md shadow-2xl p-6"},oa={class:"text-lg font-bold mb-4 text-gray-800 dark:text-white"},da={class:"relative mt-1"},ia=["value"],ua={class:"flex gap-3 pt-2"},ya={__name:"LaporanKas",setup(ga){const P=m("masuk"),b=m("sudah"),M=m(!1),$=m([]),A=m([]),Q=m([]),c=m([]),z=m(!1),C=m(""),F=m(0),q=m(0),I=m({pemasukan:0,pengeluaran:0,saldo:0});let J=null;const v=localStorage.getItem("role"),X=localStorage.getItem("username"),u=E({bulan:new Date().getMonth()+1,tahun:new Date().getFullYear()}),d=E({currentPage:1,limit:10,totalData:0,totalPage:1}),V=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],L=m(!1),K=m(!1),l=E({id:null,user_id:"",iuran_wajib:1e4,iuran_bebas:0,status:!0,nama_penginput:X}),p=E({id:null,keperluan:"",tanggal_pengeluaran:"",total_pengeluaran:0,nama_penginput:X}),H=async()=>{try{const s=localStorage.getItem("token"),e=await y.get("https://alentest.my.id/laporan/api/dashboard/stats",{headers:{Authorization:`Bearer ${s}`}});e.data&&e.data.cards&&(I.value.pemasukan=e.data.cards.pemasukan_all_time,I.value.pengeluaran=e.data.cards.pengeluaran_all_time,I.value.saldo=e.data.cards.saldo_akhir)}catch(s){console.error(s)}},de=async()=>{try{const s=localStorage.getItem("token"),e=await y.get("https://alentest.my.id/laporan/api/auth/users?role=user",{headers:{Authorization:`Bearer ${s}`}});e.data.status==="success"&&(Q.value=e.data.data)}catch(s){console.error(s)}},S=async()=>{M.value=!0,c.value=[],z.value=!1;const s=localStorage.getItem("token"),e=b.value==="sudah"?"https://alentest.my.id/laporan/api/kas/masuk/sudah-bayar":"https://alentest.my.id/laporan/api/kas/masuk/belum-bayar";try{const a=await y.get(e,{headers:{Authorization:`Bearer ${s}`},params:{bulan:u.bulan,tahun:u.tahun,page:d.currentPage,limit:d.limit,search:C.value}});$.value=a.data.data||[],a.data.pagination?(d.totalData=a.data.pagination.totalData,d.totalPage=a.data.pagination.totalPage,d.currentPage=a.data.pagination.currentPage):(d.totalData=$.value.length,d.totalPage=1,d.currentPage=1),b.value==="sudah"&&a.data.summary?F.value=a.data.summary.total_masuk:F.value=0}catch{$.value=[]}finally{M.value=!1}},D=async()=>{M.value=!0;const s=localStorage.getItem("token");try{const e=await y.get("https://alentest.my.id/laporan/api/kas/keluar",{headers:{Authorization:`Bearer ${s}`},params:{bulan:u.bulan,tahun:u.tahun,page:d.currentPage,limit:d.limit,search:C.value}});A.value=e.data.data||[],e.data.pagination?(d.totalData=e.data.pagination.totalData,d.totalPage=e.data.pagination.totalPage,d.currentPage=e.data.pagination.currentPage):(d.totalData=A.value.length,d.totalPage=1,d.currentPage=1),e.data.summary?q.value=e.data.summary.total_keluar:q.value=0}catch{A.value=[]}finally{M.value=!1}},N=()=>{d.currentPage=1,P.value==="masuk"?S():D()},Z=s=>{P.value=s,C.value="",d.currentPage=1,s==="masuk"?S():D()},ee=s=>{b.value=s,C.value="",d.currentPage=1,S()},te=()=>{J&&clearTimeout(J),J=setTimeout(()=>{d.currentPage=1,P.value==="masuk"?S():D()},500)},ae=s=>{s>=1&&s<=d.totalPage&&(d.currentPage=s,P.value==="masuk"?S():D())},ie=()=>{z.value?c.value=$.value.map(s=>s.id):c.value=[]},ue=()=>{if(c.value.length===0)return x.fire("Info","Pilih minimal satu warga","info");l.id=null,l.user_id=null,l.iuran_wajib=1e4,l.iuran_bebas=0,L.value=!0},O=(s,e=null)=>{L.value=!0,s==="edit"&&e?(l.id=e.id,l.user_id=e.user_id,l.iuran_wajib=e.iuran_wajib,l.iuran_bebas=e.iuran_bebas):s==="pay"&&e?(l.id=null,l.user_id=e.id,l.iuran_wajib=1e4,l.iuran_bebas=0):(l.id=null,l.user_id="",l.iuran_wajib=1e4,l.iuran_bebas=0)},ge=async()=>{var a,i;const s=localStorage.getItem("token"),e=`${u.tahun}-${String(u.bulan).padStart(2,"0")}-01`;try{if(c.value.length>0&&!l.id){const w={user_ids:c.value,iuran_wajib:l.iuran_wajib,iuran_bebas:l.iuran_bebas,periode:e,nama_penginput:localStorage.getItem("username"),status:!0};await y.post("https://alentest.my.id/laporan/api/kas/masuk/bulk",w,{headers:{Authorization:`Bearer ${s}`}}),x.fire("Sukses","Pembayaran massal berhasil!","success"),c.value=[],z.value=!1}else if(l.id){const w={...l,periode:e,status:!0};await y.put(`https://alentest.my.id/laporan/api/kas/masuk/${l.id}`,w,{headers:{Authorization:`Bearer ${s}`}}),x.fire("Sukses","Data berhasil diperbarui","success")}else{const w={...l,periode:e,status:!0};await y.post("https://alentest.my.id/laporan/api/kas/masuk",w,{headers:{Authorization:`Bearer ${s}`}}),x.fire("Sukses","Pembayaran berhasil dicatat","success")}L.value=!1,S(),H()}catch(w){x.fire("Gagal",((i=(a=w.response)==null?void 0:a.data)==null?void 0:i.message)||"Terjadi kesalahan","error")}},se=(s,e=null)=>{K.value=!0,s==="edit"&&e?(p.id=e.id,p.keperluan=e.keperluan,p.tanggal_pengeluaran=e.tanggal_pengeluaran.split("T")[0],p.total_pengeluaran=e.total_pengeluaran):(p.id=null,p.keperluan="",p.tanggal_pengeluaran=new Date().toISOString().split("T")[0],p.total_pengeluaran=0)},pe=async()=>{var e,a;const s=localStorage.getItem("token");try{p.id?(await y.put(`https://alentest.my.id/laporan/api/kas/keluar/${p.id}`,p,{headers:{Authorization:`Bearer ${s}`}}),x.fire("Sukses","Data diperbarui","success")):(await y.post("https://alentest.my.id/laporan/api/kas/keluar",p,{headers:{Authorization:`Bearer ${s}`}}),x.fire("Sukses","Pengeluaran dicatat","success")),K.value=!1,D(),H()}catch(i){x.fire("Gagal",((a=(e=i.response)==null?void 0:e.data)==null?void 0:a.message)||"Error","error")}},re=async(s,e)=>{if((await x.fire({title:"Yakin hapus data ini?",text:"Data tidak dapat dikembalikan",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, Hapus"})).isConfirmed){const i=localStorage.getItem("token"),w=s==="masuk"?`https://alentest.my.id/laporan/api/kas/masuk/${e}`:`https://alentest.my.id/laporan/api/kas/keluar/${e}`;try{await y.delete(w,{headers:{Authorization:`Bearer ${i}`}}),x.fire("Terhapus","Data berhasil dihapus","success"),s==="masuk"?S():D(),H()}catch{x.fire("Gagal","Terjadi kesalahan","error")}}},le=async()=>{try{const s=localStorage.getItem("token"),e=await y.get("https://alentest.my.id/laporan/api/kas/download/excel",{params:{bulan:u.bulan,tahun:u.tahun},headers:{Authorization:`Bearer ${s}`},responseType:"blob"}),a=window.URL.createObjectURL(new Blob([e.data])),i=document.createElement("a");i.href=a,i.setAttribute("download",`Laporan_Keuangan_${u.bulan}-${u.tahun}.xlsx`),document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(a)}catch(s){console.error("Gagal download laporan:",s),x.fire("Gagal","Gagal mengunduh laporan excel","error")}},j=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s),R=s=>s?s.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):"",Y=(s,e,a)=>{let i=s.target.value.replace(/\D/g,"");e[a]=i?parseInt(i):0,s.target.value=R(e[a])};return be(()=>{de(),S(),H()}),(s,e)=>(r(),ce(ke,null,{default:me(()=>[t("div",xe,[t("div",ye,[t("div",ve,[t("div",null,[e[24]||(e[24]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400 uppercase font-semibold"},"Total Pemasukan (Semua)",-1)),t("h3",he,o(j(I.value.pemasukan)),1)])]),t("div",fe,[t("div",null,[e[25]||(e[25]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400 uppercase font-semibold"},"Total Pengeluaran (Semua)",-1)),t("h3",we,o(j(I.value.pengeluaran)),1)])]),t("div",_e,[t("div",null,[e[26]||(e[26]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400 uppercase font-semibold"},"Saldo Akhir",-1)),t("h3",Pe,o(j(I.value.saldo)),1)])])]),t("div",Ce,[t("div",Se,[t("button",{onClick:e[0]||(e[0]=a=>Z("masuk")),class:G(["px-6 py-2 rounded-md text-sm font-medium transition-all",P.value==="masuk"?"bg-white dark:bg-gray-700 shadow text-blue-600 dark:text-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400"])}," Kas Masuk ",2),t("button",{onClick:e[1]||(e[1]=a=>Z("keluar")),class:G(["px-6 py-2 rounded-md text-sm font-medium transition-all",P.value==="keluar"?"bg-white dark:bg-gray-700 shadow text-red-600 dark:text-red-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400"])}," Kas Keluar ",2)])]),t("div",je,[P.value==="masuk"?(r(),n("div",Be,[t("div",Me,[t("div",$e,[t("div",Ie,[e[27]||(e[27]=t("span",{class:"absolute inset-y-0 left-0 flex items-center pl-3"},[t("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),g(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>C.value=a),onInput:te,type:"text",placeholder:"Cari Warga...",class:"w-full pl-9 pr-4 py-2 border rounded-lg text-sm focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-white"},null,544),[[W,C.value]])]),t("div",De,[g(t("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>u.bulan=a),onChange:N,class:"block w-full md:w-28 px-3 py-2 border rounded-lg text-sm focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-white"},[(r(),n(_,null,B(V,(a,i)=>t("option",{key:i,value:i+1},o(a),9,Te)),64))],544),[[U,u.bulan]]),g(t("select",{"onUpdate:modelValue":e[4]||(e[4]=a=>u.tahun=a),onChange:N,class:"block w-full md:w-24 px-3 py-2 border rounded-lg text-sm focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-white"},[(r(),n(_,null,B([2023,2024,2025,2026],a=>t("option",{key:a,value:a},o(a),9,Ae)),64))],544),[[U,u.tahun]])])]),t("div",ze,[g(t("button",{onClick:le,class:"flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition whitespace-nowrap"},e[28]||(e[28]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),T(" Excel ")]),512),[[h,f(v)=="admin"]]),t("div",Ve,[t("button",{onClick:e[5]||(e[5]=a=>ee("sudah")),class:G(["px-3 py-1.5 text-xs font-medium rounded transition",b.value==="sudah"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"text-gray-500"])},"Lunas",2),t("button",{onClick:e[6]||(e[6]=a=>ee("belum")),class:G(["px-3 py-1.5 text-xs font-medium rounded transition",b.value==="belum"?"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300":"text-gray-500"])},"Belum",2)]),g(t("button",{onClick:e[7]||(e[7]=a=>O("add")),class:"flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition whitespace-nowrap"},e[29]||(e[29]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),T(" Input Manual ")]),512),[[h,f(v)==="admin"]])])]),b.value==="sudah"?(r(),n("div",Le,[e[30]||(e[30]=t("span",{class:"text-sm font-medium text-gray-500"},"Total Pemasukan Bulan Ini:",-1)),t("span",Ue,o(j(F.value)),1)])):k("",!0),t("p",Ke,"Periode: "+o(V[u.bulan-1])+" "+o(u.tahun),1),b.value==="belum"?(r(),n("div",He,[g(t("div",Ne,[g(t("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=a=>z.value=a),onChange:ie,class:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,544),[[ne,z.value]]),e[31]||(e[31]=t("span",{class:"text-sm font-medium text-blue-700 dark:text-blue-300"},"Pilih Semua di Halaman Ini",-1))],512),[[h,f(v)==="admin"]]),c.value.length>0?(r(),n("button",{key:0,onClick:ue,class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-bold shadow-sm transition-all whitespace-nowrap"}," Bayar "+o(c.value.length)+" Warga ",1)):k("",!0)])):k("",!0),t("div",Re,[t("table",Ee,[t("thead",null,[t("tr",Ge,[b.value==="belum"?g((r(),n("th",We,null,512)),[[h,f(v)==="admin"]]):k("",!0),e[32]||(e[32]=t("th",{class:"p-4"},"Nama Warga",-1)),e[33]||(e[33]=t("th",{class:"p-4"},"Periode",-1)),b.value==="sudah"?(r(),n("th",Fe,"Wajib")):k("",!0),b.value==="sudah"?(r(),n("th",qe,"Sukarela")):k("",!0),b.value==="sudah"?(r(),n("th",Je,"Penginput")):k("",!0),e[34]||(e[34]=t("th",{class:"p-4 text-right"},"Status",-1)),g(t("th",Oe,"Aksi",512),[[h,f(v)==="admin"]])])]),t("tbody",Ye,[M.value?(r(),n("tr",Qe,[t("td",{colspan:b.value==="belum"?7:6,class:"p-6 text-center text-gray-500"},"Memuat data...",8,Xe)])):$.value.length===0?(r(),n("tr",Ze,[t("td",{colspan:b.value==="belum"?7:6,class:"p-6 text-center text-gray-500"},"Tidak ada data ditemukan.",8,et)])):(r(!0),n(_,{key:2},B($.value,a=>(r(),n("tr",{key:a.id||a.user_id,class:"hover:bg-gray-50 dark:hover:bg-gray-800/30"},[b.value==="belum"?g((r(),n("td",tt,[g(t("input",{type:"checkbox",value:a.id,"onUpdate:modelValue":e[9]||(e[9]=i=>c.value=i),class:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,8,at),[[ne,c.value]])],512)),[[h,f(v)==="admin"]]):k("",!0),t("td",st,[t("div",rt,o(a.username),1),t("div",lt,o(a.phone||"-"),1)]),t("td",nt,o(V[u.bulan-1])+" "+o(u.tahun),1),b.value==="sudah"?(r(),n(_,{key:1},[t("td",ot,o(j(a.iuran_wajib)),1),t("td",dt,o(j(a.iuran_bebas)),1),t("td",it,o(a.nama_penginput),1)],64)):k("",!0),t("td",ut,[b.value==="sudah"?(r(),n("span",gt,"LUNAS")):(r(),n("span",pt,"Belum bayar"))]),g(t("td",bt,[b.value==="sudah"?(r(),n(_,{key:0},[t("button",{onClick:i=>O("edit",a),class:"text-blue-500 hover:bg-blue-50 p-1.5 rounded"},e[35]||(e[35]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,ct),t("button",{onClick:i=>re("masuk",a.id),class:"text-red-500 hover:bg-red-50 p-1.5 rounded"},e[36]||(e[36]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,mt)],64)):(r(),n("button",{key:1,onClick:i=>O("pay",a),class:"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700"},"Bayar",8,kt))],512),[[h,f(v)==="admin"]])]))),128))])])])])):k("",!0),P.value==="keluar"?(r(),n("div",xt,[t("div",yt,[t("div",vt,[t("div",ht,[e[37]||(e[37]=t("span",{class:"absolute inset-y-0 left-0 flex items-center pl-3"},[t("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),g(t("input",{"onUpdate:modelValue":e[10]||(e[10]=a=>C.value=a),onInput:te,type:"text",placeholder:"Cari Pengeluaran...",class:"w-full pl-9 pr-4 py-2 border rounded-lg text-sm focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-white"},null,544),[[W,C.value]])]),t("div",ft,[g(t("select",{"onUpdate:modelValue":e[11]||(e[11]=a=>u.bulan=a),onChange:N,class:"block w-full md:w-28 px-3 py-2 border rounded-lg text-sm focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-white"},[(r(),n(_,null,B(V,(a,i)=>t("option",{key:i,value:i+1},o(a),9,wt)),64))],544),[[U,u.bulan]]),g(t("select",{"onUpdate:modelValue":e[12]||(e[12]=a=>u.tahun=a),onChange:N,class:"block w-full md:w-24 px-3 py-2 border rounded-lg text-sm focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-white"},[(r(),n(_,null,B([2023,2024,2025,2026],a=>t("option",{key:a,value:a},o(a),9,_t)),64))],544),[[U,u.tahun]])])]),t("div",Pt,[t("button",{onClick:le,class:"flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition whitespace-nowrap"},e[38]||(e[38]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),T(" Excel ")])),g(t("button",{onClick:e[13]||(e[13]=a=>se("add")),class:"flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap"},e[39]||(e[39]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),T(" Catat Pengeluaran ")]),512),[[h,f(v)==="admin"]])])]),t("div",Ct,[e[40]||(e[40]=t("span",{class:"text-sm font-medium text-gray-500"},"Total Pengeluaran Bulan Ini:",-1)),t("span",St,o(j(q.value)),1)]),t("div",jt,[t("table",Bt,[t("thead",null,[t("tr",Mt,[e[41]||(e[41]=t("th",{class:"p-4"},"Tanggal",-1)),e[42]||(e[42]=t("th",{class:"p-4"},"Keperluan",-1)),e[43]||(e[43]=t("th",{class:"p-4"},"Nominal",-1)),e[44]||(e[44]=t("th",{class:"p-4"},"Penginput",-1)),g(t("th",$t,"Aksi",512),[[h,f(v)==="admin"]])])]),t("tbody",It,[M.value?(r(),n("tr",Dt,e[45]||(e[45]=[t("td",{colspan:"4",class:"p-6 text-center text-gray-500"},"Memuat data...",-1)]))):A.value.length===0?(r(),n("tr",Tt,e[46]||(e[46]=[t("td",{colspan:"4",class:"p-6 text-center text-gray-500"},"Belum ada data pengeluaran. ",-1)]))):(r(!0),n(_,{key:2},B(A.value,a=>(r(),n("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-800/30"},[t("td",At,o(new Date(a.tanggal_pengeluaran).toLocaleDateString("id-ID")),1),t("td",zt,o(a.keperluan),1),t("td",Vt,o(j(a.total_pengeluaran)),1),t("td",Lt,o(a.nama_penginput),1),g(t("td",Ut,[t("button",{onClick:i=>se("edit",a),class:"text-blue-500 hover:bg-blue-50 p-1.5 rounded"},e[47]||(e[47]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,Kt),t("button",{onClick:i=>re("keluar",a.id),class:"text-red-500 hover:bg-red-50 p-1.5 rounded"},e[48]||(e[48]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Ht)],512),[[h,f(v)==="admin"]])]))),128))])])])])):k("",!0),t("div",Nt,[t("div",Rt," Halaman "+o(d.currentPage)+" dari "+o(d.totalPage)+" (Total "+o(d.totalData)+" Data) ",1),t("div",Et,[t("button",{onClick:e[14]||(e[14]=a=>ae(d.currentPage-1)),disabled:d.currentPage<=1,class:"px-3 py-1 text-sm border rounded hover:bg-gray-100 disabled:opacity-50 dark:text-white dark:hover:bg-blue-400"},"Prev",8,Gt),t("button",{onClick:e[15]||(e[15]=a=>ae(d.currentPage+1)),disabled:d.currentPage>=d.totalPage,class:"px-3 py-1 text-sm border rounded hover:bg-gray-100 disabled:opacity-50 dark:text-white dark:hover:bg-blue-400"},"Next",8,Wt)])])]),L.value?(r(),n("div",Ft,[t("div",qt,[t("h3",Jt,o(c.value.length>0&&!l.id?"Pembayaran Massal":l.id?"Edit Pembayaran":"Input Pembayaran"),1),t("form",{onSubmit:oe(ge,["prevent"]),class:"space-y-4"},[c.value.length===0&&!l.id?(r(),n("div",Ot,[e[50]||(e[50]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Pilih Warga",-1)),g(t("select",{"onUpdate:modelValue":e[16]||(e[16]=a=>l.user_id=a),class:"w-full mt-1 p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:""},[e[49]||(e[49]=t("option",{value:"",disabled:""},"-- Pilih Warga --",-1)),(r(!0),n(_,null,B(Q.value,a=>(r(),n("option",{key:a.id,value:a.id},o(a.username),9,Yt))),128))],512),[[U,l.user_id]])])):c.value.length>0&&!l.id?(r(),n("div",Qt,[e[53]||(e[53]=t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",null,[e[51]||(e[51]=T("Membayar untuk ")),t("strong",null,o(c.value.length)+" warga",1),e[52]||(e[52]=T(" terpilih."))])])):k("",!0),t("div",Xt,[t("div",null,[e[55]||(e[55]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Iuran Wajib",-1)),t("div",Zt,[e[54]||(e[54]=t("span",{class:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500 dark:text-gray-400"},"Rp",-1)),t("input",{type:"text",value:R(l.iuran_wajib),onInput:e[17]||(e[17]=a=>Y(a,l,"iuran_wajib")),class:"w-full pl-10 p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,40,ea)])]),t("div",null,[e[57]||(e[57]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Sukarela",-1)),t("div",ta,[e[56]||(e[56]=t("span",{class:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500 dark:text-gray-400"},"Rp",-1)),t("input",{type:"text",value:R(l.iuran_bebas),onInput:e[18]||(e[18]=a=>Y(a,l,"iuran_bebas")),class:"w-full pl-10 p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,40,aa)])])]),t("div",sa,"Periode: "+o(V[u.bulan-1])+" "+o(u.tahun),1),t("div",ra,[t("button",{type:"button",onClick:e[19]||(e[19]=a=>L.value=!1),class:"flex-1 py-2 border rounded-lg text-gray-600 hover:bg-gray-50 dark:text-white dark:hover:text-black"},"Batal"),e[58]||(e[58]=t("button",{type:"submit",class:"flex-1 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium"},"Simpan",-1))])],32)])])):k("",!0),K.value?(r(),n("div",la,[t("div",na,[t("h3",oa,o(p.id?"Edit Pengeluaran":"Catat Pengeluaran"),1),t("form",{onSubmit:oe(pe,["prevent"]),class:"space-y-4"},[t("div",null,[e[59]||(e[59]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Keperluan",-1)),g(t("input",{"onUpdate:modelValue":e[20]||(e[20]=a=>p.keperluan=a),type:"text",class:"w-full mt-1 p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:"",placeholder:"Contoh: Beli Lampu Jalan"},null,512),[[W,p.keperluan]])]),t("div",null,[e[60]||(e[60]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Tanggal",-1)),g(t("input",{"onUpdate:modelValue":e[21]||(e[21]=a=>p.tanggal_pengeluaran=a),type:"date",class:"w-full mt-1 p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:""},null,512),[[W,p.tanggal_pengeluaran]])]),t("div",null,[e[62]||(e[62]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Total Biaya (Rp)",-1)),t("div",da,[e[61]||(e[61]=t("span",{class:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500 dark:text-gray-400"},"Rp",-1)),t("input",{type:"text",value:R(p.total_pengeluaran),onInput:e[22]||(e[22]=a=>Y(a,p,"total_pengeluaran")),class:"w-full pl-10 p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:""},null,40,ia)])]),t("div",ua,[t("button",{type:"button",onClick:e[23]||(e[23]=a=>K.value=!1),class:"flex-1 py-2 border rounded-lg text-gray-600 hover:bg-gray-50 dark:text-white dark:hover:text-black"},"Batal"),e[63]||(e[63]=t("button",{type:"submit",class:"flex-1 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium"},"Simpan",-1))])],32)])])):k("",!0)])]),_:1}))}};export{ya as default};
